<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Chess vs My Engine</title>

  <!-- chessboard.css -->
  <link rel="stylesheet" href="/vendor/@chrisoakman/chessboardjs/dist/chessboard-1.0.0.min.css" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header class="app-header">
    <h1>Chess vs My Engine</h1>
  </header>

  <main class="app" id="appGrid">
    <!-- Left: Board + clocks + vertical eval -->
    <section class="board-pane">
      <div class="board-row">
        <!-- Board + clocks stack -->
        <div class="board-col">
            <div class="clock" id="clock-top">
            <span id="label-top" class="label">Black</span>
            <span id="time-top" class="time">05:00</span>
            </div>

            <!-- NEW: wrap eval bar + board so they align perfectly -->
            <div class="board-wrap">
            <!-- Vertical eval bar (toggleable) -->
            <aside class="eval-vert" id="evalVert" aria-hidden="false" title="Evaluation (White POV)">
                <div class="eval-vert-fill" id="evalVertFill"></div>
                <div class="eval-vert-label mono" id="evalVertText">—</div>
            </aside>

            <!-- BOARD -->
            <div id="board" class="board"></div>
            </div>

            <div class="clock" id="clock-bottom">
                <span id="label-bottom" class="label">White</span>
                <span id="time-bottom" class="time">05:00</span>
            </div>

            <div id="status" class="status">Ready</div>

            <!-- PV line under board -->
            <div class="card pvcard">
                <div class="row" style="grid-template-columns:120px 1fr;">
                    <label>Best line</label>
                    <div id="pvText" class="mono muted pv">—</div>
                </div>
            </div>
        </div>
      </div>
    </section>

    <!-- Right: Controls + Analyze + Moves -->
    <aside class="controls">
      <div class="card">
        <h2>Game Settings</h2>

        <div class="row">
          <label for="color">Play as</label>
          <select id="color">
            <option value="w" selected>White</option>
            <option value="b">Black</option>
          </select>
        </div>

        <div class="row">
          <label for="base">Base time</label>
          <select id="base">
            <option value="60">1 min</option>
            <option value="180">3 min</option>
            <option value="300" selected>5 min</option>
            <option value="600">10 min</option>
            <option value="1800">30 min</option>
          </select>
        </div>

        <div class="row">
          <label for="inc">Increment</label>
          <select id="inc">
            <option value="0" selected>0 sec</option>
            <option value="1">+1 sec</option>
            <option value="2">+2 sec</option>
            <option value="5">+5 sec</option>
          </select>
        </div>

        <div class="row">
          <label for="timeMode">Engine time</label>
          <select id="timeMode">
            <option value="movetime" selected>Fixed movetime</option>
            <option value="clock">Use clocks (wtime/btime)</option>
          </select>
        </div>

        <div class="row" id="movetimeRow">
          <label for="movetime">Movetime</label>
          <select id="movetime">
            <option value="200">0.2 sec</option>
            <option value="500">0.5 sec</option>
            <option value="1000" selected>1.0 sec</option>
            <option value="2000">2.0 sec</option>
            <option value="5000">5.0 sec</option>
          </select>
        </div>

        <div class="row">
          <label for="boardSize">Board size</label>
          <input id="boardSize" type="range" min="300" max="900" step="12" value="480" />
        </div>

        <div class="row">
          <label for="showEval">Show eval bar</label>
          <input id="showEval" type="checkbox" checked />
        </div>

        <div class="buttons">
          <button id="start" class="primary">Start</button>
          <button id="reset">Reset</button>
          <button id="flip">Flip Board</button>
        </div>
      </div>

      <div class="card">
        <h2>Analyze a Position (FEN → Best Move)</h2>
        <div class="row">
          <label for="fenInput" class="stack">FEN</label>
          <textarea id="fenInput" rows="3" placeholder="Paste a FEN here…"></textarea>
        </div>
        <div class="row">
          <label for="anMovetime">Movetime</label>
          <select id="anMovetime">
            <option value="500">0.5 sec</option>
            <option value="1000" selected>1.0 sec</option>
            <option value="2000">2.0 sec</option>
            <option value="5000">5.0 sec</option>
            <option value="10000">10 sec</option>
          </select>
        </div>
        <div class="buttons">
          <button id="analyze">Get Best Move</button>
        </div>
        <div id="anResult" class="mono muted"></div>
      </div>

      <!-- Moves panel moved under settings + analyze -->
      <div class="card">
        <h2 style="margin-bottom:8px;">Moves</h2>
        <div id="moves" class="moves mono">—</div>
        <div class="buttons" style="margin-top:10px;">
          <button id="btnBack">← Back</button>
          <button id="btnFwd">Forward →</button>
          <button id="btnResign" class="danger">Resign</button>
          <button id="btnPause">Pause</button>
          <button id="btnResume">Resume</button>
          <button id="btnCopyFEN">Copy FEN</button>
          <button id="btnCopyPGN">Copy PGN</button>
          <button id="btnDownloadPGN">Download PGN</button>
        </div>
      </div>
    </aside>
  </main>

  <!-- JS: chess.js, jQuery, chessboard.js, app -->
  <script src="/vendor/chess.js/chess.js"></script>
  <script src="/vendor/jquery/dist/jquery.min.js"></script>
  <script src="/vendor/@chrisoakman/chessboardjs/dist/chessboard-1.0.0.min.js"></script>
  <script src="/script.js"></script>
</body>
</html>
